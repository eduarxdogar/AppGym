<div class="min-h-screen bg-[#0B0E14] text-white p-4 md:p-8 font-sans">
  
  <div class="max-w-7xl mx-auto grid grid-cols-1 lg:grid-cols-12 gap-8">
    
    <!-- LEFT COLUMN: VISUALIZATION (4 cols) -->
    <div class="lg:col-span-4 space-y-6">
       
       <div class="bg-[#151921] border border-zinc-800/50 rounded-2xl p-6 shadow-xl relative overflow-hidden">
          <div class="absolute top-0 right-0 p-4 opacity-5">
             <mat-icon class="text-6xl">accessibility_new</mat-icon>
          </div>
          <h2 class="text-[#CCFF00] font-bold tracking-widest uppercase text-sm mb-6 flex items-center gap-2">
             <mat-icon class="text-sm">analytics</mat-icon> Análisis Biomecánico
          </h2>
          
          <!-- Body Map -->
          <div class="transform scale-90 -mt-4">
             <app-professional-body-map [recoveryStatus]="recoveryStatus()"></app-professional-body-map>
          </div>
       </div>

       <!-- Ready to Train Card -->
       <div class="bg-[#151921] border border-zinc-800/50 rounded-2xl p-6 shadow-lg">
          <h3 class="text-green-400 font-bold uppercase text-xs tracking-widest mb-2 flex items-center gap-2">
             <mat-icon class="text-sm">battery_full</mat-icon> Listos para Entrenar
          </h3>
          <p class="text-zinc-300 text-sm leading-relaxed">
             {{ readyToTrain() }}
          </p>
       </div>

    </div>


    <!-- RIGHT COLUMN: ACTION (8 cols) -->
    <div class="lg:col-span-8 flex flex-col h-full space-y-8">
       
       <!-- Header -->
       <div class="space-y-2">
           <h1 class="text-3xl md:text-5xl font-extrabold tracking-tight">
              DISEÑADOR <span class="text-[#CCFF00] drop-shadow-[0_0_10px_rgba(204,255,0,0.5)]">IA</span>
           </h1>
           <p class="text-zinc-400 max-w-2xl text-lg">
              Describe tu objetivo de hoy. El sistema analizará tu fatiga actual (mapa izquierdo) y diseñará la sesión óptima para maximizar la hipertrofia sin sobreentrenamiento.
           </p>
       </div>

       <!-- Input Area -->
       <div class="bg-[#151921] border border-zinc-800/50 rounded-2xl p-6 shadow-2xl relative" *ngIf="!generatedWorkout()">
          
          <div class="absolute -top-3 -right-3 bg-[#CCFF00] text-black text-[10px] font-bold px-3 py-1 rounded-full uppercase tracking-wider shadow-lg animate-pulse">
             System Ready
          </div>

          <textarea 
             [(ngModel)]="userPrompt"
             [disabled]="isLoading()"
             rows="5"
             class="w-full bg-[#0B0E14] text-white rounded-xl border border-zinc-800 p-5 focus:border-[#CCFF00] focus:ring-1 focus:ring-[#CCFF00] transition-all resize-none text-lg placeholder:text-zinc-600 mb-6"
             placeholder="Ej: Quiero enfocarme en Hombros y Tríceps, tengo 60 mins..."></textarea>
          
          <button (click)="generate()" 
                  [disabled]="isLoading() || !userPrompt()"
                  class="w-full py-5 bg-[#CCFF00] hover:bg-[#bbe600] disabled:opacity-50 disabled:cursor-not-allowed text-black font-extrabold text-xl rounded-xl transition-all shadow-[0_0_20px_rgba(204,255,0,0.3)] hover:shadow-[0_0_30px_rgba(204,255,0,0.5)] flex items-center justify-center gap-3">
              <mat-icon *ngIf="!isLoading()">auto_awesome</mat-icon>
              <mat-icon *ngIf="isLoading()" class="animate-spin">sync</mat-icon>
              {{ isLoading() ? 'ANALIZANDO DATOS...' : 'GENERAR PROTOCOLO' }}
          </button>
       </div>

       <!-- Result Area -->
       <div *ngIf="generatedWorkout()" class="animate-in fade-in slide-in-from-bottom-5 duration-700">
           <div class="bg-[#151921] border border-zinc-800/50 rounded-2xl p-8 shadow-2xl">
               
               <div class="flex items-center justify-between mb-8 pb-6 border-b border-zinc-800">
                   <div>
                       <div class="inline-flex items-center gap-2 px-3 py-1 rounded bg-[#CCFF00]/10 text-[#CCFF00] text-[10px] font-bold uppercase tracking-widest mb-2 border border-[#CCFF00]/20">
                           <mat-icon class="text-xs">verified</mat-icon> Protocolo Generado
                       </div>
                       <h2 class="text-3xl font-bold text-white">{{ generatedWorkout()?.nombre }}</h2>
                   </div>
                   <div class="text-right">
                       <p class="text-2xl font-bold text-white">{{ generatedWorkout()?.ejercicios?.length }}</p>
                       <p class="text-xs text-zinc-500 uppercase">Ejercicios</p>
                   </div>
               </div>

               <!-- Exercise List -->
               <div class="space-y-3 max-h-[400px] overflow-y-auto pr-2 custom-scrollbar mb-8">
                   <div *ngFor="let ex of generatedWorkout()?.ejercicios; let i = index" 
                        class="bg-[#0B0E14] border border-zinc-800 p-4 rounded-xl flex items-center justify-between group hover:border-zinc-700 transition">
                       
                       <div class="flex items-center gap-4">
                           <div class="h-8 w-8 rounded bg-zinc-800 flex items-center justify-center text-zinc-400 font-bold text-sm border border-zinc-700">
                               {{ i + 1 }}
                           </div>
                           <div>
                               <h4 class="text-white font-bold">{{ ex.nombre }}</h4>
                               <p class="text-xs text-zinc-500">{{ ex.series }} Series x {{ ex.repeticiones }} Reps</p>
                           </div>
                       </div>
                       
                       <div *ngIf="ex.tipos">
                           <span class="text-[10px] text-zinc-500 bg-zinc-900 border border-zinc-800 px-2 py-1 rounded uppercase tracking-wider">{{ ex.tipos }}</span>
                       </div>

                   </div>
               </div>

               <!-- Actions -->
               <div class="grid grid-cols-2 gap-4">
                   <button (click)="generatedWorkout.set(null)" class="py-4 border border-red-500/30 text-red-500 hover:bg-red-500/10 rounded-xl font-bold uppercase tracking-wider transition">
                       Descartar
                   </button>
                   <button (click)="saveAndStart()" class="py-4 bg-[#CCFF00] hover:bg-[#bbe600] text-black rounded-xl font-bold uppercase tracking-wider shadow-[0_0_15px_rgba(204,255,0,0.3)] transition">
                       Iniciar Sesión
                   </button>
               </div>

           </div>
       </div>

    </div>
  </div>
</div>
